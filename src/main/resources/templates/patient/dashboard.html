<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: head('–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞')}"></head>
<body>
<div th:replace="~{fragments :: navbar}"></div>
<div th:replace="~{fragments :: alert}"></div>

<div class="container mt-4">
  <div th:if="${passwordChanged}" class="alert alert-success alert-dismissible fade show" role="alert">
    –í–∞—à –ø–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–º–µ–Ω–µ–Ω!
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  <h2 class="mb-4">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞</h2>

  <div class="text-center mb-5">
    <a href="/patient/appointments/book" class="btn btn-primary btn-lg px-5 py-3 shadow-sm" style="margin-left: -955px; margin-top: 20px">
      <i class="bi bi-calendar-plus me-2"></i>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º
    </a>
  </div>

  <div class="row g-4">
    <div class="col-md-5">
      <div class="card shadow-sm h-100">
        <div class="card-header blue-element text-white">
          <h5 class="mb-0">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h5>
        </div>
        <div class="card-body">
          <ul class="list-unstyled mb-3">
            <li class="mb-2"><strong>–§–ò–û:</strong> <span th:text="${user.fullName} ?: '‚Äî'"></span></li>
            <li class="mb-2"><strong>Email:</strong> <span th:text="${user.email} ?: '‚Äî'"></span></li>
            <li class="mb-2"><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <span th:text="${patient.phone ?: '–Ω–µ —É–∫–∞–∑–∞–Ω'}"></span></li>
          </ul>
          <a href="/patient/profile" class="btn btn-outline-primary w-100">
            –ú–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
          </a>
        </div>
      </div>
    </div>

    <div class="col-md-7">
      <div class="card shadow-sm h-100">
        <div class="card-header text-white green-element">
          <h5 class="mb-0">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h5>
        </div>
        <div class="card-body d-flex flex-column justify-content-center">
          <div class="row g-2">
            <div class="col-6">
              <a href="/patient/schedule" class="btn btn-outline-light-bluee w-100">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–∞—á–µ–π</a>
            </div>
            <div class="col-6">
              <a href="/patient/appointments" class="btn btn-outline-dark-blue w-100">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</a>
            </div>
            <div class="col-6">
              <a href="/patient/referrals" class="btn btn-outline-yelloww w-100">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>
            </div>
            <div class="col-6">
              <a href="/patient/records" class="btn btn-outline-sky-blue w-100">–ó–∞–∫–ª—é—á–µ–Ω–∏—è –≤—Ä–∞—á–µ–π</a>
            </div>
            <div class="col-6">
              <a href="/patient/results" class="btn btn-outline-grey w-100">–ê–Ω–∞–ª–∏–∑—ã –∏ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</a>
            </div>
            <div class="col-6">
              <a href="/patient/history" class="btn btn-outline-purple w-100">–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–µ–º–æ–≤</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="mb-0">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</h4>
      <a href="/patient/appointments" class="text-primary">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ ü†ñ</a>
    </div>
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
        <tr>
          <th>–í—Ä–∞—á</th>
          <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
          <th>–î–∞—Ç–∞</th>
          <th>–í—Ä–µ–º—è</th>
          <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(appointments)}">
          <td colspan="5" class="text-center">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π</td>
        </tr>
        <tr th:each="a, iterStat : ${appointments}" th:if="${appointments != null and iterStat.index < 3}">
          <td th:text="${a.doctor?.user?.fullName ?: '‚Äì'}"></td>
          <td th:text="${a.doctor?.specialization ?: '‚Äì'}"></td>
          <td th:text="${a.schedule?.date ?: '‚Äì'}"></td>
          <td th:text="${a.schedule?.time ?: '‚Äì'}"></td>
          <td>
            <form th:action="@{/patient/appointments/cancel}" method="post" style="display:inline;">
              <input type="hidden" name="id" th:value="${a.id}" />
              <button type="submit" class="btn btn-sm btn-outline-danger"
                      onclick="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å –∫ –≤—Ä–∞—á—É?')">
                –û—Ç–º–µ–Ω–∏—Ç—å
              </button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="mb-0">–ú–æ–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h4>
      <a href="/patient/referrals" class="text-primary">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ ü†ñ</a>
    </div>
    <div class="card">
      <div class="card-body">
        <ul class="nav nav-tabs" id="referralTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="analyses-tab" data-bs-toggle="tab" data-bs-target="#analyses">–ê–Ω–∞–ª–∏–∑—ã</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="studies-tab" data-bs-toggle="tab" data-bs-target="#studies">–û–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</button>
          </li>
        </ul>
        <div class="tab-content mt-3">
          <!-- –ê–Ω–∞–ª–∏–∑—ã -->
          <div class="tab-pane fade show active" id="analyses">
            <table class="table table-sm">
              <thead>
              <tr>
                <th>–¢–∏–ø –∞–Ω–∞–ª–∏–∑–∞</th>
                <th>–ö–∞–±–∏–Ω–µ—Ç</th>
                <th>–î–∞—Ç–∞</th>
                <th>–í—Ä–µ–º—è</th>
                <th>–í—Ä–∞—á</th>
                <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
              </tr>
              </thead>
              <tbody>
              <tr th:if="${#lists.isEmpty(analyses)}">
                <td colspan="7" class="text-center">–ù–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω–∞ –∞–Ω–∞–ª–∏–∑—ã</td>
              </tr>
              <tr th:each="r : ${analyses}">
                <td th:text="${r.testType}"></td>
                <td th:text="${r.office ?: '‚Äî'}"></td>
                <td th:text="${r.date}"></td>
                <td th:text="${r.time ?: '‚Äî'}"></td>
                <td th:text="${r.doctor?.user?.fullName ?: '‚Äî'}"></td>
                <td th:text="${r.doctor?.specialization ?: '‚Äî'}"></td>
                <td>–û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</td>
              </tr>
              </tbody>
            </table>
          </div>

          <div class="tab-pane fade" id="studies">
            <table class="table table-sm">
              <thead>
              <tr>
                <th>–¢–∏–ø –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</th>
                <th>–ö–∞–±–∏–Ω–µ—Ç</th>
                <th>–î–∞—Ç–∞</th>
                <th>–í—Ä–µ–º—è</th>
                <th>–í—Ä–∞—á</th>
                <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
              </tr>
              </thead>
              <tbody>
              <tr th:if="${#lists.isEmpty(studies)}">
                <td colspan="7" class="text-center">–ù–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω–∞ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</td>
              </tr>
              <tr th:each="r : ${studies}">
                <td th:text="${r.testType}"></td>
                <td th:text="${r.office ?: '‚Äî'}"></td>
                <td th:text="${r.date}"></td>
                <td th:text="${r.time ?: '‚Äî'}"></td>
                <td th:text="${r.doctor?.user?.fullName ?: '‚Äî'}"></td>
                <td th:text="${r.doctor?.specialization ?: '‚Äî'}"></td>
                <td>–û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div th:replace="~{fragments :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>